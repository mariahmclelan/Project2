<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Leaflet Map</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    <style>
        html, body {width: 100%; height: 100%; margin: 0; padding: 0;}
        #map {position:absolute; top:0; bottom:0; right:0; left:0;}
        #map-container {position: relative; width: 100%; height: 100%;}

        .leaflet-container { font-size: 1rem; }
    </style>
</head>
<body>
    <div id="map-container">
        <div id="map"></div>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>

    <script>
        var map = L.map("map", {
            center: [29.7604, -95.3698],
            zoom: 6,
            zoomControl: true
        });

        L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
            attribution: "&copy; <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors"
        }).addTo(map);

        var featureGroup = L.featureGroup().addTo(map);

        // Define a function to create circle markers and popups
        function createCircleMarkerAndPopup(lat, lng, isdName, revenue, studentCount) {
            // Create a circle marker
            var circleMarker = L.circleMarker(
                [lat, lng], 
                {
                    "bubblingMouseEvents": true, 
                    "color": "yellow", 
                    "dashArray": null, 
                    "dashOffset": null, 
                    "fill": true, 
                    "fillColor": "yellow", 
                    "fillOpacity": 0.5, 
                    "fillRule": "evenodd", 
                    "lineCap": "round", 
                    "lineJoin": "round", 
                    "opacity": 1.0, 
                    "radius": 5, 
                    "stroke": true, 
                    "weight": 3
                }
            );

            // Create a popup content
            var popupContent = `
                <div style="width: 100.0%; height: 100.0%;">
                    ISD Name: ${isdName}<br>
                    Revenue: $${revenue}<br>
                    Student Count: ${studentCount}
                </div>
            `;

            // Create a popup
            var popup = L.popup({"maxWidth": "100%"}).setContent(popupContent);

            // Bind the popup to the circle marker
            circleMarker.bindPopup(popup);

            // Add the circle marker to the feature group
            circleMarker.addTo(featureGroup);
        }

        // Call the function for each set of data
        createCircleMarkerAndPopup(33.046513, -102.426092, "wellman-union cisd", "4,415,151", "284");
        createCircleMarkerAndPopup(28.45743, -98.551851, "mcmullen county isd", "5,952,479", "283");
        // Add more calls for other data points as needed

        // Define coordinates and content
        var coordinates = [
            [33.738156, -102.326597],
            [34.30540597, -99.29892465],
            // Add more coordinates here...!!!
        ];

        var content = [
            'ISD Name: whitharral isd<br>Revenue: $3,666,518<br>Student Count: 236',
            'ISD Name: northside isd<br>Revenue: $3,545,785<br>Student Count: 236',
            // Add more content here...!!!
        ];

        // Iterate over coordinates and content to create markers and popups
        for (var i = 0; i < coordinates.length; i++) {
            var coordinate = coordinates[i];
            var popupContent = content[i];

            var circleMarker = L.circleMarker(coordinate, {
                "bubblingMouseEvents": true,
                "color": "orange",
                "fillColor": "orange",
                "fillOpacity": 0.5,
                "radius": 5,
                "weight": 3
            }).addTo(featureGroup);

            var popup = L.popup({"maxWidth": "100%"});
            var html = $(`<div style="width: 100.0%; height: 100.0%;">${popupContent}</div>`)[0];
            popup.setContent(html);
            circleMarker.bindPopup(popup);
        }
    </script>
</body>
</html>
